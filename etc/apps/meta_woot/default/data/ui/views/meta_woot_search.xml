<form>
  <label>Meta Woot! Search</label>
  <fieldset submitButton="false" autoRun="true">
    <input type="dropdown" token="index">
      <label>Index</label>
      <choice value="*">All</choice>
      <search>
        <query>| inputlookup meta_woot | dedup index | fields index | sort index</query>
      </search>
      <fieldForLabel>index</fieldForLabel>
      <fieldForValue>index</fieldForValue>
      <default>*</default>
    </input>
    <input type="dropdown" token="sourcetype" searchWhenChanged="true">
      <label>Sourcetype</label>
      <choice value="*">All</choice>
      <search>
        <query>| inputlookup meta_woot where index=$index$ | dedup sourcetype | fields sourcetype | sort sourcetype</query>
      </search>
      <fieldForLabel>sourcetype</fieldForLabel>
      <fieldForValue>sourcetype</fieldForValue>
      <default>*</default>
    </input>
    <input type="text" token="host" searchWhenChanged="true">
      <label>Host</label>
      <default>*</default>
    </input>
    <input type="dropdown" token="filter" searchWhenChanged="true">
      <label>Index Time Filter</label>
      <choice value="where recentTime&gt;(now()-86400)">Indexed in the last 24hrs</choice>
      <choice value="where recentTime&gt;(now()-3600)">Indexed in the last hour</choice>
      <choice value="where recentTime&lt;(now()-86400)">Not indexed in the last 24hrs</choice>
      <choice value="where recentTime&lt;(now()-3600)">Not indexed in last hour</choice>
      <choice value="search recentTime=*">No Filter</choice>
      <default>where recentTime&gt;(now()-86400)</default>
    </input>
    <input type="dropdown" token="latency" searchWhenChanged="true">
      <label>Latency Filter</label>
      <choice value="latency&gt;=0">Show All</choice>
      <choice value="latency&gt;15">Over 15 mins ahead/behind</choice>
      <choice value="latency&gt;30">Over 30 mins ahead/behind</choice>
      <choice value="latency&gt;60">Over 60 mins ahead/behind</choice>
      <choice value="latency&gt;180">Over 3 hours ahead/behind</choice>
      <choice value="latency&gt;360">Over 6 hours ahead/behind</choice>
      <choice value="latency&gt;720">Over 12 hours ahead/behind</choice>
      <choice value="latency_type=&quot;Logging Ahead&quot;">Logging ahead of time</choice>
      <choice value="latency=0">No Latency</choice>
      <default>latency&gt;=0</default>
    </input>
  </fieldset>
  <row>
    <panel>
      <single>
        <search>
          <query>| inputlookup meta_woot where index=$index$ sourcetype=$sourcetype$ host=$host$ | $filter$ | eval latency= round((recentTime-lastTime)/60,2)  | eval latency_type=if(latency&lt;0,"Logging Ahead","Logging Behind") | eval latency=abs(latency) | eval latency_type=if(latency="0.00","No Latency",latency_type) | where $latency$ | stats dc(index) as "Total Indexes"</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorBy">value</option>
        <option name="colorMode">none</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[0,30,70,100]</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="trendInterval">auto</option>
        <option name="underLabel">Total Indexes</option>
        <option name="useColors">0</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <search>
          <query>| inputlookup meta_woot  where index=$index$ sourcetype=$sourcetype$ host=$host$ | $filter$ | eval latency= round((recentTime-lastTime)/60,2)  | eval latency_type=if(latency&lt;0,"Logging Ahead","Logging Behind") | eval latency=abs(latency) | eval latency_type=if(latency="0.00","No Latency",latency_type) | where $latency$ | stats dc(sourcetype) as "Total Sourcetypes"</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorBy">value</option>
        <option name="colorMode">none</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[0,30,70,100]</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="trendInterval">auto</option>
        <option name="underLabel">Total Sourcetypes</option>
        <option name="useColors">0</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
    <panel>
      <single>
        <search>
          <query>| inputlookup meta_woot  where index=$index$ sourcetype=$sourcetype$ host=$host$ | $filter$ | eval latency= round((recentTime-lastTime)/60,2)  | eval latency_type=if(latency&lt;0,"Logging Ahead","Logging Behind") | eval latency=abs(latency) | eval latency_type=if(latency="0.00","No Latency",latency_type) | where $latency$  | stats dc(host) as "Total Hosts"</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="colorBy">value</option>
        <option name="colorMode">none</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
        <option name="rangeValues">[0,30,70,100]</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="trendInterval">auto</option>
        <option name="underLabel">Total Hosts</option>
        <option name="useColors">0</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <title>Results</title>
      <input type="dropdown" token="fields" searchWhenChanged="true">
        <label>Field Selection:</label>
        <choice value="table index, sourcetype, host, firstTime, lastTime, recentTime, &quot;latency (mins)&quot;,latency_type, lastUpdated | sort - &quot;latency (mins)&quot;">All</choice>
        <choice value="dedup index, sourcetype | table index, sourcetype">Indexes, Sourcetypes Only</choice>
        <choice value="table index, sourcetype, host">Indexes, Sourcetypes, Hosts Only</choice>
        <default>table index, sourcetype, host, firstTime, lastTime, recentTime, "latency (mins)",latency_type, lastUpdated | sort - "latency (mins)"</default>
      </input>
      <html>Click to drill down to event counts over time. firstTime is the first time that Meta Woot first saw the record. lastTime is the last timestamp of the last event. recentTime is the time the last event was actually indexed.</html>
      <table>
        <search>
          <query>| inputlookup meta_woot  where index=$index$ sourcetype=$sourcetype$ host=$host$ | $filter$  | eval latency= round((recentTime-lastTime)/60,2)  | eval latency_type=if(latency&lt;0,"Logging Ahead","Logging Behind") | eval latency=abs(latency) | eval latency_type=if(latency="0.00","No Latency",latency_type) | where $latency$ | convert ctime(recentTime) ctime(firstTime) ctime(lastTime) ctime(lastUpdated) | rename latency AS "latency (mins)" | $fields$</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">heatmap</option>
        <option name="drilldown">row</option>
        <option name="count">50</option>
        <drilldown target="NewWindow">
          <link>
            <![CDATA[
          meta_woot_trends?form.sourcetype=$row.sourcetype$&form.index=$row.index$&form.host=$row.host$
		]]>
          </link>
        </drilldown>
      </table>
    </panel>
  </row>
</form>