<form>
  <label>Applications</label>
  <fieldset autoRun="true" submitButton="true">
    <input type="dropdown" token="app" searchWhenChanged="false">
      <label>Application:</label>
      <default>*</default>
      <choice value="*">All</choice>
      <search>
        <query>| inputlookup apps.csv</query>
      </search>
      <fieldForLabel>app</fieldForLabel>
      <fieldForValue>app</fieldForValue>
    </input>
  </fieldset>
  <row>
    <panel>
      <single>
        <search>
          <query>index=wls app=$app$ earliest=-1d@d  app_state=* | stats first(app_state) as State | eval status=if(State="STATE_ACTIVE",5,0)| rangemap field=status red=0-1 green=2-5 | eval active=if(status=5,"Active","Down")| table active</query>
          <earliest>-24h</earliest>
          <latest>now</latest>
        </search>
        <option name="beforeLabel">Current Status:</option>
        <option name="linkView">search</option>
        <option name="drilldown">none</option>
      </single>
    </panel>
    <panel>
      <single>
        <title>Application is running in the following domains</title>
        <searchString>index=wls app=$app$ domain=* | dedup domain | rename domain as "Domain Name" | table "Domain Name"</searchString>
        <earliestTime>-24h</earliestTime>
        <latestTime>now</latestTime>
      </single>
    </panel>
    <panel>
      <table>
        <title>Application is running in the following servers</title>
        <search>
          <query>index=wls sourcetype=wls_jmx app=$app$ server=* | dedup server | rename server as "Server Name" | table "Server Name"</query>
          <earliest>-24h</earliest>
          <latest>now</latest>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <drilldown>
          <link>
            <![CDATA[
	  /app/weblogic_web/server_overview?form.server=$click.value$]]>
          </link>
        </drilldown>
        <option name="count">10</option>
      </table>
    </panel>
  </row>
</form>