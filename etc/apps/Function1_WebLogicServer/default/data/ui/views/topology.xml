<form>
  <label>Topology</label>
  <fieldset submitButton="true" autoRun="true">
    <input type="dropdown" token="domain" searchWhenChanged="false">
      <label>Please select a domain:</label>
      <choice value="*">All</choice>
      <default>*</default>
      <search>
        <query>|inputlookup domains.csv</query>
      </search>
      <fieldForLabel>domain</fieldForLabel>
      <fieldForValue>domain</fieldForValue>
    </input>
  </fieldset>
  <row>
    <panel>
      <table>
        <title>Machines in Domain</title>
        <searchString>`index_wls` domain=$domain$ host=* | dedup host | rename host as "Machine Name" | table "Machine Name"</searchString>
        <earliest>-1d</earliest>
        <latest>now</latest>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="drilldown">cell</option>
        <drilldown>
          <link>
            <![CDATA[
	  /app/weblogic_web/machines?form.machine=$click.value$]]>
          </link>
        </drilldown>
      </table>
    </panel>
    <panel>
      <table>
        <title>Servers in Domain</title>
        <searchString>`index_wls` server=* server_state=* domain=$domain$ | rename server as "Server Name" | rename host as "Machine Name" | stats first(server_state) as State by "Server Name" "Machine Name"<earliest>-1d</earliest>
          <latest>now</latest>
        </searchString>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <drilldown>
          <link>
            <![CDATA[
	  /app/weblogic_web/server_overview?form.machine=$click.value$]]>
          </link>
        </drilldown>
      </table>
    </panel>
    <panel>
      <table>
        <title>Applications in Domain:</title>
        <searchString>`index_wls` domain=$domain$ app=* | dedup app | eval "Application Name" = app | table "Application Name"<earliest>-1d</earliest>
          <latest>now</latest>
        </searchString>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="drilldown">row</option>
        <drilldown>
          <link>
            <![CDATA[
  /app/weblogic_web/applications?form.app=$click.value$]]>
          </link>
        </drilldown>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <table>
        <title>JMS Servers in Domain</title>
        <search>
          <query>`index_wls` domain=$domain$ jms_server=* | stats first(jms_current_messages_count) as "Current Messages" first(jms_pending_messages_count) as "Pending Messages"  by jms_server | rename jms_server as "JMS Server"</query>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="count">10</option>
      </table>
    </panel>
    <panel>
      <table>
        <title>JDBC Data Sources in Domain</title>
        <search>
          <query>`index_wls` domain=$domain$ jdbc_datasource_name=* | rename jdbc_datasource_name as "Data Source Name" | stats first(jdbc_active_connection_count) as "Active Connections" by "Data Source Name"</query>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="count">10</option>
      </table>
    </panel>
  </row>
</form>